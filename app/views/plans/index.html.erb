<div class="container-fluid">

<p class="mt-3 mb-0">Hello <font color="#ff66b3ff"><%= current_user.nickname %></font></p>


  <h1 class="cocol mt-0 mb-3">Your upcoming plans</h1>
<!-- Going New Large Card style -->
<div class="row px-1 mb-3">
<div class="row flex-nowrap overflow-auto">
   <% @plans_going_all.each do |plan| %>
    <a href="<%= plan_path(plan) %>">
  <div class="col">
    <div class="card ms-1 me-2 card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg" style="background-image: linear-gradient(-10deg, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0.1)), url('<%= plan.image %>');">
      <div class="d-flex flex-column h-100 p-5 pb-3 text-shadow-1">
        <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold"><%= plan.title %></h3>
        <ul class="d-flex list-unstyled mt-auto">

          <li class="nav-item dropdown">
                <% if current_user.avatar_picture.present? %>
              <%= cl_image_tag(current_user.avatar_picture.key, alt: 'Yes', width: 32, height: 32, class: "avatar-image rounded-circle border border-white") %>
          <li class="me-auto">
            <% else %>
              <%= image_tag "avatarhome1.png", alt: "Avatar", class: "ms-0 me-3" %>
            <% end %>
          </li>
          <li class="d-flex align-items-center me-3">
            <i class="bi bi-geo-fill me-2"></i>
            <small class="cocoxs"><%= plan.location %></small>
          </li>
          <li class="d-flex align-items-center">
            <i class="bi bi-calendar3 me-2"></i>
            <small class="cocoxs">5d</small>
          </li>
        </ul>
      </div>
    </div>
    </div>
    <% end %>
  </div>
</a>
</div>

    <!-- All status but decline Start of Old Card Style -->
                <div class="row gx-0">
                <div class="row flex-nowrap overflow-auto">
<% @plans_participant_status.each do |plan| %>
 <a href="<%= plan_path(plan) %>">
    <div class="card me-2 mb-3" style="max-width: 560px;">
            <!-- create a row with no gutters between columns -->
    <div class="row flex-nowrap overflow-auto">
                <!-- on small screens, take up the entire width of the row and order it first -->
                <!-- on medium screens and up, take up half the width of the row -->
                <div class="col order-2 col-md-6  d-flex flex-column">
                    <!-- add the card content in a card-body div -->
                    <div class="card-body d-flex flex-column justify-content-between ps-0 pe-3 pt-3 pb-3">
                        <div>
                            <h5 class="card-title"><%= plan.title %></h5>
                             <h6 class="cocol card-subtitle text-muted mb-2"><% if plan.start_datetime.strftime('%-d') < plan.end_datetime.strftime('%-d') %> <%= plan.start_datetime.strftime('%a %e %b · %-l:%M') %>		                             <h6 class="cocol card-subtitle text-muted mb-2"><% if plan.start_datetime.strftime('%-d') < plan.end_datetime.strftime('%-d') %> <%= plan.start_datetime.strftime('%a %e %b · %-l:%M') %>
 -<%= plan.end_datetime.strftime('%a %-d %b · %-l:%M%P') %> <% else %> <%= plans.first.start_datetime.strftime('%a %e %b · %-l:%M') %>-<%= plans.first.end_datetime.strftime('%-l:%M%P') %> <% end %></h6>		 -<%= plan.end_datetime.strftime('%a %-d %b · %-l:%M%P') %> <% else %> <%= plan.start_datetime.strftime('%a %e %b · %-l:%M') %>-<%= plan.end_datetime.strftime('%-l:%M%P') %> <% end %></h6>
                              <p class="cocoxs card-text mb-2"> <%= plan.description %> </p>
                        </div> <!-- add two buttons, one for "Going" and one for "Chat" -->
                        <div>
                          <% plan.participants.each do |participant| %>
                            <% if participant.user_id == current_user.id %>
                              <div class="d-flex justify-content-between"> <button type="button" class="btn btn-outline-success <%= participant.status %>"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-patch-question-fill" viewBox="0 0 16 16">
                                <path d="M5.933.87a2.89 2.89 0 0 1 4.134 0l.622.638.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636zM7.002 11a1 1 0 1 0 2 0 1 1 0 0 0-2 0zm1.602-2.027c.04-.534.198-.815.846-1.26.674-.475 1.05-1.09 1.05-1.986 0-1.325-.92-2.227-2.262-2.227-1.02 0-1.792.492-2.1 1.29A1.71 1.71 0 0 0 6 5.48c0 .393.203.64.545.64.272 0 .455-.147.564-.51.158-.592.525-.915 1.074-.915.61 0 1.03.446 1.03 1.084 0 .563-.208.885-.822 1.325-.619.433-.926.914-.926 1.64v.111c0 .428.208.745.585.745.336 0 .504-.24.554-.627z"></path>
                                  </svg>
                                    <%= participant.status%>
                                  </button>
                                </div>
                              <% end %>
                            <% end %>
                        </div>
                    </div>
                </div> <!-- on small screens, take up the entire width of the row and order it first -->

                <div class="col order-1" style="max-height: 220px;">
                    <img src= <%= plan.image %> class="img-fluid rounded-start h-100 object-fit-cover object-position-center" alt="">
                </div>
            </div>
        </div>
         <% end %>
    </div>
</a>
</div>

<!-- Decline Small Card Section -->
    <div class="row gx-0">
    <div class="row flex-nowrap overflow-auto">
     <% @plans_participant_status_decline.each do |plan| %>
<a href="<%= plan_path(plan) %>">
     <div class="card light-border-subtle mb-3 me-2">
            <div class="card-body row">
                <div class="col-9">
                    <h5 class="card-title text-muted"><%= plan.title %></h5>
                    <h6 class="cocol card-subtitle text-muted mb-2"><% if plan.start_datetime.strftime('%-d') < plan.end_datetime.strftime('%-d') %> <p><%= plan.start_datetime.strftime('%a %e %b · %-l:%M') %>
-<%= plan.end_datetime.strftime('%a %-d %b · %-l:%M%P') %></p> <% else %> <p class="time-mb"><%= plan.start_datetime.strftime('%a %e %b · %-l:%M') %>-<%= plan.end_datetime.strftime('%-l:%M%P') %></p> <% end %></h6>
                </div>
                <div class="cocoxs col-3 text-end">
                </div>
            </div>
        </div> <% end %> </div>
        </div>
</a>

<!-- Suggestion Card Section -->
    <div class="row gx-0">
        <h2 class="cocol">Ideas for a new plans</h2>
        <div class="row flex-nowrap overflow-auto">
<!-- Suggestion Card single -->
          <div class="card mb-3 me-2">
  <div class="card-body row">
    <div class="col-4">
      <button type="button" class="btn btn-warning">
        <i class="fa-solid fa-pizza-slice"></i>
      </button>
    </div>
    <div class="col-8 text-end">
      <h5 class="card-title">Pizza Night</h5>
    </div>
  </div>
</div>
<div class="card mb-3 me-2">
  <div class="card-body row">
    <div class="col-4">
      <button type="button" class="btn btn-danger">
        <i class="fa-solid fa-guitar"></i>
      </button>
    </div>
    <div class="col-8 text-end">
      <h5 class="card-title">Gig</h5>
    </div>
  </div>
</div>
<!-- Suggestion Card Single End -->
        </div>
  </div>

<!-- Suggestion Card Section -->
    <div>
        <button class="menu-btn">+
          <%= link_to new_plan_path do %>
            <span class="bi bi-plus-circle"></span>
          <% end %>
          <span class="bi bi-pass"></span>
          <span class="bi bi-patch-question"></span>
        </button>
        </div>


            <script>
                const menuBtn = document.querySelector('.menu-btn');
                menuBtn.addEventListener('click', function() {
                  this.classList.toggle('active');
                });
            </script>
        </div>
    </div>
